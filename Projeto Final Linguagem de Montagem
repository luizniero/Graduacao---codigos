# Graduacao---codigos
Repositorio de codigos de programas da graduação


section .data
  organizatela  db  ' - - - - - - - - - - - - Editor de Texto - - - - - - - - - -  - - -', 10
  lenorg  equ $-organizatela
  msg1  db 'Digite o nome do arquivo que deseja editar', 10
  len1  equ   $-msg1
  


section .bss
    nome_arquivo  resb  3		  ;armazena o nome do arquivo
    tamanho_nome  resd  		  ;tamanho do nome do arquivo
    tamanho_arquivo resd 		  ; tamanho do que esta escrito no arquivo quando o sistema le
    info          resb  40		   ;vai armazenar o texto digitado pelo usuario
    id_arquivo    resd  		  ;identificardor do arquivo.  usado para trabalhar com arquivos

section .text
  global _start

_start:
        call msg_inicial
        call abre_arquivo
        call mostra_conteudo
        call escreve_no_arquivo
        
        
msg_inicial
    mov	eax, 4	         		;escreve
	mov	ebx, 1		        ; na tela
	mov	ecx, organizatela	; msg
	mov	edx, lenorg	        ;tamanho
	int 80h
    mov	eax, 4	         		;escreve
	mov	ebx, 1		        ; na tela
	mov	ecx, msg1       	; msg
	mov	edx, len1	        ;tamanho
	int 80h


abre_arquivo
    mov eax, 3          		 ;ler
    mov ebx, 0	
    mov ecx, nome_arquiv		 ;armazenar na variavel nome_arquivo
    mov edx, 30
    
					 ;; NESSA PARTE, EU NÃO SEI COMO DECIDIR SE VAI CRIAR UM NOVO ARQUIVO OU ABRIR UM EXISTENTE.  PRECISO VERIFICAR COM O PROFESSOR UMA MANEIRA DE VALIDAR SE UM ARQUIVO JÁ EXISTE
    
    ;CRIA UM ARQUIVO COM O NOME ESPECIFICADO
    mov eax, 8
    mov ebx, nome_arquivo
    mov ecx, 0777q
    int 80h
    mov [id_arquivo], eax ;apos criar o arquivo, o id fica em eax, nesse caso, eu movo para a variavel id_arquivo
    
    ;ABRE O ARQUIVO COM O NOME ESPECIFICADO
    mov eax, 5
    mov ebx,nome_arquivo
    mov ecx, 2
    mov edx, 0777q
    int 80h
    mov [id_arquivo], eax ;apos abrir o arquivo, o id fica em eax, nesse caso, eu movo para a var id_arquivo
    
    
mostra_conteudo
    mov eax, 3
    mov ebx, [id_arquivo]
    mov ecx, info
    mov edx, 400
    int 80h
    mov [tamanho_arquivo], eax ;quando leio o arquivo, o tamanho dele, em bytes, fica em eax.  Agora eu tenho, em tamanho_arquivo, o tamanho de tudo que esta escrito.  Isso será util para escrever o que o usuário digitar a partir desse ponto do arquivo.
    ret

escreve_no_arquivo
    mov eax, 3              ;ler do teclado
    mov ebx, 0
    mov ecx, info
    mov edx, 400
    int 80h
    
    ;; NESSE PONTO, PRECISO VERIFICAR O TAMANHO DO QUE FOI DIGITADO PELO USUÁRIO E VER, NO FINAL, O COMANDO QUE ELE DIGITOU.  PRECISO DA AJUDA DO PROFESSOR AQUI.
   
	
fazer um while infinito, e ir comparando com o /. Quando chegar em /, pular para um procedimento que valida isso.
Eu tento ler um arquivo, mesmo sem saber se ele existe.  Se retornar -1 (ou qualquer < 0), em eax, ele não existe.
